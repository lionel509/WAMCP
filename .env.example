# WhatsApp / Meta Cloud API
# Generate WHATSAPP_VERIFY_TOKEN as a custom string for webhook verification
WHATSAPP_VERIFY_TOKEN=dev-verify-token

# Your WhatsApp Access Token (from Meta App Dashboard > WhatsApp > API Setup)
# IMPORTANT: Do not use placeholder values like 'replace_me' - get a real token from Meta
WHATSAPP_ACCESS_TOKEN=replace_me_access_token_from_meta

# Your App Secret (from Meta App Dashboard > Settings > Basic)
WHATSAPP_APP_SECRET=replace_me_app_secret

# Phone Number ID (the WhatsApp number you're using - from Meta App Dashboard > WhatsApp > Phone Numbers)
# Example format: 875171289009578
# IMPORTANT: Use your actual phone number ID, not the string "string" or placeholders
WHATSAPP_PHONE_NUMBER_ID=replace_me_phone_number_id

# WhatsApp Business Account ID (WABA ID)
WHATSAPP_WABA_ID=replace_me_waba_id
WHATSAPP_API_VERSION=v24.0
WHATSAPP_BASE_URL=https://graph.facebook.com
VERIFY_WEBHOOK_SIGNATURE=true

# Debug echo (disable in prod)
DEBUG_ECHO_MODE=false
DEBUG_ECHO_ALLOWLIST_E164=
DEBUG_ECHO_RATE_LIMIT_SECONDS=60
DEBUG_ECHO_GROUP_FALLBACK=false

# Core services
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=wamcp
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/wamcp
REDIS_URL=redis://localhost:6379/0

# MinIO
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_ENDPOINT=localhost:9000
MINIO_BUCKET=documents
MINIO_SECURE=false

# Admin
ADMIN_API_KEY=admin123

# Watchdog
WATCHDOG_ENABLED=true
WATCHDOG_INTERVAL_SECONDS=60
WATCHDOG_STUCK_MESSAGE_MINUTES=5
WATCHDOG_MAX_QUEUE_BACKLOG=500
WATCHDOG_MAX_PENDING_DOCS=200
WATCHDOG_MAX_FAILED_DOCS=50
WATCHDOG_NOTIFY_MODE=log
WATCHDOG_ADMIN_NOTIFY_E164=
WATCHDOG_REENQUEUE_STALLED_DOCS=true
# Public URL Configuration
# Set this to your public URL if the API is behind a proxy, tunnel, or load balancer
# This is used for:
#   - Constructing webhook callback URLs for Meta
#   - Building external links in MCP sources (citations, permalinks)
# Leave empty to use the request URL (works for local dev)
# Example: https://your-domain.com or https://xyz.cloudflare.com (from Quick Tunnel)
PUBLIC_BASE_URL=
# Quick Tunnel (local dev only - do NOT use in production)
# Run 'make tunnel' to expose your local API to the internet via Cloudflare
# Generates a random public URL each runâ€”perfect for testing Meta webhooks locally
ENABLE_QUICK_TUNNEL=false
QUICK_TUNNEL_TARGET_URL=http://api:8000
